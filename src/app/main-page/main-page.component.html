<div class="d-flex justify-content-center">
<div class="col-3 container-fluid" id="sidebar">
  <h2>Movie Filters</h2>

  <!-- "Cast Filters" -->
  <app-filter-component
    ng-attr-id="castTable"
    [FilterItems]="CastFilterItems"
    (filtersChanged)="onCastFiltersChanged($event)"
    [DataColumnName]="'Cast Member'"
  ></app-filter-component>

  <!-- "Release Year Filters" -->
  <app-filter-component
    [FilterItems]="ReleaseYearFilterItems"
    (filtersChanged)="onReleaseYearsFiltersChanged($event)"
    [DataColumnName]="'Release Year'"
  ></app-filter-component>

  <!-- "Director Filters" -->
  <app-filter-component
    [FilterItems]="DirectorFilterItems"
    (filtersChanged)="onDirectorFiltersChanged($event)"
    [DataColumnName]="'Director'"
  ></app-filter-component>

  <!-- "Genres Filters" -->
  <app-filter-component
    [FilterItems]="GenreFilterItems"
    (filtersChanged)="onGenresFiltersChanged($event)"
    [DataColumnName]="'Genre'"
  ></app-filter-component>

  <!-- Drop down selector for num of results -->
  <h3 class="container-fluid">Number of Movies</h3>
  <select
    #filterNumber
    mat-select
    name="filterNumber"
    id="filterNumber"
    (change)="reslice()"
    class="container-fluid"
  >
    <option value="5" selected>5</option>
    <option value="10">10</option>
    <option value="15">15</option>
    <option value="20">20</option>
    <option value="25">25</option>
    <option value="30">30</option>
  </select>

  <!-- Apply filters button -->
  <button mat-raised-button
          (click)="doFiltering()"
          class="container-fluid"
  >Apply Filters</button>

</div>

<div class="col-9 container-fluid">
  <!-- Table to display filtered results -->
  <table #resultsTable mat-table [dataSource]="sortedMovies">
    <ng-container matColumnDef="title">
      <th mat-header-cell *matHeaderCellDef>Title</th>
      <td mat-cell *matCellDef="let movie">
        <!-- matTooltip is what display the short summar on hover -->
        <a
          href="https://www.imdb.com/title/{{ movie.id }}/"
          target="_blank"
          matTooltip="{{ movie.short_summary }}"
          >{{ movie.title }}</a
        >
      </td>
    </ng-container>
    <ng-container matColumnDef="popularity">
      <th mat-header-cell *matHeaderCellDef>Popularity</th>
      <td mat-cell *matCellDef="let movie">{{ movie.popularity }}</td>
    </ng-container>
    <ng-container matColumnDef="budget">
      <th mat-header-cell *matHeaderCellDef>Budget</th>
      <td mat-cell *matCellDef="let movie">
        ${{ movie.budget | largeNumSuffix }}
      </td>
    </ng-container>
    <ng-container matColumnDef="revenue">
      <th mat-header-cell *matHeaderCellDef>Revenue</th>
      <td mat-cell *matCellDef="let movie">
        ${{ movie.revenue | largeNumSuffix }}
      </td>
    </ng-container>
    <ng-container matColumnDef="cast">
      <th mat-header-cell *matHeaderCellDef>Cast</th>
      <td mat-cell *matCellDef="let movie">{{ movie.cast | addSpace }}</td>
    </ng-container>
    <ng-container matColumnDef="director">
      <th mat-header-cell *matHeaderCellDef>Director</th>
      <td mat-cell *matCellDef="let movie">{{ movie.director }}</td>
    </ng-container>
    <ng-container matColumnDef="genres">
      <th mat-header-cell *matHeaderCellDef>Genres</th>
      <td mat-cell *matCellDef="let movie">{{ movie.genres | addSpace }}</td>
    </ng-container>
    <ng-container matColumnDef="release_year">
      <th mat-header-cell *matHeaderCellDef>Release Year</th>
      <td mat-cell *matCellDef="let movie">{{ movie.release_year }}</td>
    </ng-container>
    <ng-container matColumnDef="relevance">
      <th mat-header-cell *matHeaderCellDef>Relevance</th>
      <td mat-cell *matCellDef="let movie">{{ movie.relevance }}</td>
    </ng-container>
    <tr mat-header-row *matHeaderRowDef="displayColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayColumns"></tr>
  </table>
</div>
</div>